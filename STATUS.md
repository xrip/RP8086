# RP8086 - –°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

## ‚úÖ –§–∞–∑–∞ 1+ –∑–∞–≤–µ—Ä—à–µ–Ω–∞: –í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ç–æ—Ç–∏–ø

**–û—Å–Ω–æ–≤–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:**
- üöÄ **100x —É—Å–∫–æ—Ä–µ–Ω–∏–µ**: 5 –ö–ì—Ü ‚Üí 500 –ö–ì—Ü (–≥–æ—Ç–æ–≤ –∫ 5 –ú–ì—Ü)
- üìä **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: Multicore FIFO, –Ω—É–ª–µ–≤—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –≤ IRQ
- üñ•Ô∏è **Real-time –≤–∏–¥–µ–æ–≤—ã–≤–æ–¥**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
- ‚ö° **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞**: -Ofast, copy_to_ram, size optimizations
- üîß **BIOS –æ–±–Ω–æ–≤–ª–µ–Ω**: Turbo XT BIOS v3.1 (10/28/2017)

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

#### 1. CPU —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (cpu.c / cpu.h)
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è clock –Ω–∞ GPIO29 (PWM, 33% duty cycle)
  - –ß–∞—Å—Ç–æ—Ç–∞: **500 –ö–ì—Ü** (100x —É—Å–∫–æ—Ä–µ–Ω–∏–µ, –≥–æ—Ç–æ–≤ –∫ 5 –ú–ì—Ü)
  - –ü—Ä–∏ 400 MHz —Å–∏—Å—Ç–µ–º–Ω–æ–π —á–∞—Å—Ç–æ—Ç–µ: –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã PWM
- ‚úÖ RESET sequence –Ω–∞ GPIO28
  - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–∞–π–º–∏–Ω–≥: 10 —Ç–∞–∫—Ç–æ–≤ LOW, 5 —Ç–∞–∫—Ç–æ–≤ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏
- ‚úÖ `toggle_cpu()` - —Ñ—É–Ω–∫—Ü–∏—è –≤–∫–ª—é—á–µ–Ω–∏—è/–≤—ã–∫–ª—é—á–µ–Ω–∏—è —Ç–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

#### 2. PIO –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —à–∏–Ω—ã (i8086_bus.pio)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ i8086 minimal mode (–±–µ–∑ CS)
- ‚úÖ 16-–±–∏—Ç–Ω–∞—è —à–∏–Ω–∞ –¥–∞–Ω–Ω—ã—Ö (AD0-AD15)
- ‚úÖ 20-–±–∏—Ç–Ω–∞—è –∞–¥—Ä–µ—Å–∞—Ü–∏—è (AD0-AD15 + A16-A19)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ RD/WR —Ü–∏–∫–ª–æ–≤
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ READY –¥–ª—è wait states
- ‚úÖ –î–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è —à–∏–Ω–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º

**–†–∞—Å–ø–∏–Ω–æ–≤–∫–∞:**
```
GPIO 0-15  : AD0-AD15 (–º—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–¥—Ä–µ—Å/–¥–∞–Ω–Ω—ã–µ)
GPIO 16-19 : A16-A19 (—Å—Ç–∞—Ä—à–∏–µ –±–∏—Ç—ã –∞–¥—Ä–µ—Å–∞)
GPIO 20    : ALE (Address Latch Enable)
GPIO 21    : RD (Read strobe)
GPIO 22    : WR (Write strobe)
GPIO 23    : INTA (Interrupt acknowledge from i8086, active LOW) - **–û–ë–ù–û–í–õ–ï–ù–û**
GPIO 24    : M/IO (Memory/IO select)
GPIO 25    : BHE (Bus High Enable)
GPIO 26    : INTR (Interrupt request to i8086, active HIGH) - **–û–ë–ù–û–í–õ–ï–ù–û**
GPIO 27    : READY (Wait state control)
GPIO 28    : RESET (Reset output) - **–û–ë–ù–û–í–õ–ï–ù–û**
GPIO 29    : CLK (Clock output, 500 –ö–ì—Ü)
```

#### 3. –≠–º—É–ª—è—Ü–∏—è –ø–∞–º—è—Ç–∏ (cpu_bus.c)
- ‚úÖ ROM: 8KB Turbo XT BIOS v3.1 (0xFE000-0xFFFFF) - **–û–ë–ù–û–í–õ–ï–ù–û**
- ‚úÖ RAM: 128KB (0x00000-0x1FFFF) - **–£–í–ï–õ–ò–ß–ï–ù–û**
- ‚úÖ Video RAM: 4KB MDA (0xB0000-0xB7FFF) —Å real-time –≤—ã–≤–æ–¥–æ–º
- ‚úÖ –ß—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å 16-–±–∏—Ç–Ω—ã—Ö —Å–ª–æ–≤ (little-endian)
- ‚úÖ –î–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ M/IO –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –ø–∞–º—è—Ç—å/–ø–æ—Ä—Ç—ã
- ‚úÖ **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** —Å–æ–±—ã—Ç–∏–π —à–∏–Ω—ã —á–µ—Ä–µ–∑ FIFO

#### 4. I/O –ø–æ—Ä—Ç—ã
- ‚úÖ Port 0x3BA: VGA Status Register (—ç–º—É–ª—è—Ü–∏—è vsync –±–∏—Ç–æ–≤)
- ‚úÖ –ü–æ—Ä—Ç—ã 0x000-0xFFF: –û–±—â–∏–µ –ø–æ—Ä—Ç—ã (–≤–æ–∑–≤—Ä–∞—â–∞—é—Ç 0xFFFF)

#### 5. –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π (–∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ main.c / cpu_bus.c)
- ‚úÖ –≠–º—É–ª—è—Ü–∏—è 8259A PIC (–±–∞–∑–æ–≤–∞—è)
- ‚úÖ INTR/INTA –ø—Ä–æ—Ç–æ–∫–æ–ª —á–µ—Ä–µ–∑ PIO state machine (IRQ 3)
- ‚úÖ Core1: **–î–≤–æ–π–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**
  - –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä IRQ0 –∫–∞–∂–¥—ã–µ ~5492ms (–∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è 500 –ö–ì—Ü)
  - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ª–æ–≥–æ–≤ –∏–∑ FIFO
  - Real-time –≤—ã–≤–æ–¥ –≤–∏–¥–µ–æ–ø–∞–º—è—Ç–∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª
- ‚úÖ INTA –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º READY —Å–∏–≥–Ω–∞–ª–æ–º
- ‚úÖ –í—ã–¥–∞—á–∞ –≤–µ–∫—Ç–æ—Ä–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è 0x08 (IRQ0)
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ multicore FIFO (lockless)

#### 6. –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π
- ‚úÖ IRQ0: Write cycle handler (—Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º)
- ‚úÖ IRQ1: Read cycle handler (—Å VGA port —ç–º—É–ª—è—Ü–∏–µ–π)
- ‚úÖ IRQ3: INTA cycle handler (—á–µ—Ä–µ–∑ PIO)
- ‚úÖ –í—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–ª—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏
- ‚úÖ Time-critical —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–∑–º–µ—â–µ–Ω—ã –≤ RAM
- ‚úÖ **–ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏**: printf –≤—ã–Ω–µ—Å–µ–Ω –≤ Core1

#### 7. –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (–ù–û–í–û–ï)
- ‚úÖ –ö–æ–ª—å—Ü–µ–≤–æ–π –±—É—Ñ–µ—Ä –Ω–∞ 256 –∑–∞–ø–∏—Å–µ–π
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä—ã `log_entry_t` –∏ `shared_log_buffer_t`
- ‚úÖ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ multicore FIFO
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ Core1 –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ IRQ handlers
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –≤–∏–¥–µ–æ–ø–∞–º—è—Ç–∏ (0xB0000-0xB7FFF)
- ‚úÖ Real-time –≤—ã–≤–æ–¥ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª —á–µ—Ä–µ–∑ ANSI escape sequences

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–°–∏—Å—Ç–µ–º–Ω–∞—è —á–∞—Å—Ç–æ—Ç–∞:** 400 MHz (—Å —Ä–∞–∑–≥–æ–Ω–æ–º –∏ –ø–æ–≤—ã—à–µ–Ω–Ω—ã–º –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ–º)

**i8086 Clock:** 500 –ö–ì—Ü (–≥–æ—Ç–æ–≤ –∫ 5 –ú–ì—Ü)
- –ü–µ—Ä–∏–æ–¥: 2 ¬µs
- Duty cycle: 33% (~660 ns HIGH, ~1340 ns LOW)

**–ó–∞–ø–∞—Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ @ 500 –ö–ì—Ü:**
- 1 —Ç–∞–∫—Ç i8086 @ 500 –ö–ì—Ü = 2 ¬µs = 800 —Ç–∞–∫—Ç–æ–≤ RP2040
- IRQ latency: ~10-20 —Ç–∞–∫—Ç–æ–≤ RP2040
- –û–±—Ä–∞–±–æ—Ç–∫–∞ read/write: ~50-75 —Ç–∞–∫—Ç–æ–≤ RP2040 (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ)
- **–ó–∞–ø–∞—Å: 10-16x** - ARM —É—Å–ø–µ–≤–∞–µ—Ç —Å –±–æ–ª—å—à–∏–º –∑–∞–ø–∞—Å–æ–º

**–ó–∞–ø–∞—Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ @ 5 –ú–ì—Ü (—Ü–µ–ª–µ–≤–∞—è —á–∞—Å—Ç–æ—Ç–∞):**
- 1 —Ç–∞–∫—Ç i8086 @ 5 –ú–ì—Ü = 200 ns = 80 —Ç–∞–∫—Ç–æ–≤ RP2040
- –û–±—Ä–∞–±–æ—Ç–∫–∞ read/write: ~50-75 —Ç–∞–∫—Ç–æ–≤ RP2040
- **–ó–∞–ø–∞—Å: ~1.1-1.6x** - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π, –Ω–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π

**Compiler optimizations:**
- -Ofast: –ê–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏
- -ffunction-sections, -fdata-sections: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞
- copy_to_ram: –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ –∏–∑ RAM –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏
- -Wl,--wrap=atexit: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞

### –ö–∞—Ä—Ç–∞ –ø–∞–º—è—Ç–∏

```
0x00000 - 0x1FFFF : RAM (128 KB) - **–£–í–ï–õ–ò–ß–ï–ù–û**
0x20000 - 0xAFFFF : –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 0xFFFF)
0xB0000 - 0xB7FFF : Video RAM MDA (4 KB) - **–ù–û–í–û–ï**
0xB8000 - 0xFDFFF : –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 0xFFFF)
0xFE000 - 0xFFFFF : ROM Turbo XT BIOS v3.1 (8 KB) - **–û–ë–ù–û–í–õ–ï–ù–û**
```

**Reset vector:** 0xFFFF0 ‚Üí –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ ROM –ø–æ —Å–º–µ—â–µ–Ω–∏—é 0x1FF0

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
[i8086 CPU] ‚ÜêINTR/INTA‚Üí [PIO IRQ3 + Core1]
     ‚Üï                            ‚Üì
[PIO State Machine] ‚ÜêIRQ0/1/3‚Üí [ARM Core0]
     ‚Üì                            ‚Üì
 GPIO 0-29                   [–≠–º—É–ª—è—Ç–æ—Ä]
                         RAM + ROM + VRAM
                                  ‚Üë
                     FIFO ‚Üê‚Üí [ARM Core1]
                         IRQ Generator + Log Processor
```

**–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:**
- **PIO:** –í—Å—è –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å —à–∏–Ω–æ–π (timing-critical)
  - –î–µ—Ç–µ–∫—Ç ALE, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ RD/WR/INTA
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ READY
  - –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —à–∏–Ω—ã –¥–∞–Ω–Ω—ã—Ö
  - **INTA –æ–±—Ä–∞–±–æ—Ç–∫–∞** —á–µ—Ä–µ–∑ state machine (IRQ3)

- **ARM Core0:** –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö (timing-critical, –Ω–æ –±–µ–∑ I/O)
  - –î–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥—Ä–µ—Å–∞
  - –ß—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å RAM/ROM/VRAM
  - I/O –ø–æ—Ä—Ç—ã (–≤–∫–ª—é—á–∞—è VGA 0x3BA)
  - **–ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–µ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** —á–µ—Ä–µ–∑ FIFO
  - Main loop —Å __wfi()

- **ARM Core1:** –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π + –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ª–æ–≥–æ–≤ (–Ω–µ timing-critical)
  - IRQ0 timer (~5492ms @ 500 –ö–ì—Ü, ~54.925ms @ 5 –ú–ì—Ü, IBM PC standard)
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ INTR —Å–∏–≥–Ω–∞–ª–æ–º
  - **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ª–æ–≥–æ–≤** –∏–∑ FIFO
  - **Real-time –≤—ã–≤–æ–¥ –≤–∏–¥–µ–æ–ø–∞–º—è—Ç–∏** —á–µ—Ä–µ–∑ ANSI
  - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ multicore FIFO (lockless)

### –¢–µ–∫—É—â–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. ‚úÖ ~~BHE –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è~~ **–ò–°–ü–†–ê–í–õ–ï–ù–û** - –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ 8/16 –±–∏—Ç
2. ‚úÖ ~~–¢–æ–ª—å–∫–æ 64KB RAM~~ **–ò–°–ü–†–ê–í–õ–ï–ù–û** - —É–≤–µ–ª–∏—á–µ–Ω–æ –¥–æ 128KB
3. ‚ö†Ô∏è –ù–µ—Ç –ø–æ–ª–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ 8259A (—Ç–æ–ª—å–∫–æ –±–∞–∑–æ–≤—ã–π INTR/INTA)
4. ‚ö†Ô∏è –ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ DMA
5. ‚ö†Ô∏è –ß–∞—Å—Ç–æ—Ç–∞ 500 –ö–ì—Ü (—Ü–µ–ª–µ–≤–∞—è 5 –ú–ì—Ü - –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫–æ–¥–∞ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è)

1. ‚úÖ **100x —É—Å–∫–æ—Ä–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã**
   - 5 –ö–ì—Ü ‚Üí 500 –ö–ì—Ü (–≥–æ—Ç–æ–≤ –∫ 5 –ú–ì—Ü)
   - –ó–∞–ø–∞—Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏: 10-16x –ø—Ä–∏ 500 –ö–ì—Ü

2. ‚úÖ **Compiler optimizations**
   - -Ofast: –ê–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏
   - -ffunction-sections, -fdata-sections: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞
   - copy_to_ram: –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–∑ RAM
   - -Wl,--wrap=atexit: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

3. ‚úÖ **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - Multicore FIFO –¥–ª—è lockless –æ–±–º–µ–Ω–∞
   - –ö–æ–ª—å—Ü–µ–≤–æ–π –±—É—Ñ–µ—Ä –Ω–∞ 256 –∑–∞–ø–∏—Å–µ–π
   - –ù—É–ª–µ–≤—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –≤ IRQ handlers
   - Real-time –≤—ã–≤–æ–¥ –≤–∏–¥–µ–æ–ø–∞–º—è—Ç–∏

4. ‚úÖ **Memory optimizations**
   - Address alignment —á–µ—Ä–µ–∑ `address & ~1U`
   - 4-byte aligned arrays (RAM, ROM, VRAM)
   - Single 16-bit access –±–µ–∑ boundary checks
   - RAM —É–º–µ–Ω—å—à–µ–Ω –¥–æ 128KB (–¥–ª—è –±—É—Ñ–µ—Ä–æ–≤ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è)

5. ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**
   - –ü–æ—Ä—è–¥–æ–∫: clock ‚Üí reset ‚Üí pic_init ‚Üí bus
   - PIO –≥–æ—Ç–æ–≤–∞ –¥–æ –∑–∞–ø—É—Å–∫–∞ CPU
   - FIFO –æ—á–∏—â–∞–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ Core1

6. ‚úÖ **BIOS –æ–±–Ω–æ–≤–ª–µ–Ω**
   - GlaBIOS ‚Üí Turbo XT BIOS v3.1 (10/28/2017)
   - VGA port 0x3BA —ç–º—É–ª—è—Ü–∏—è –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚ö° **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∂–µ–ª–µ–∑–µ @ 500 –ö–ì—Ü**
   - ‚úÖ –û—Å—Ü–∏–ª–ª–æ–≥—Ä–∞—Ñ –Ω–∞ GPIO29 (CLK): 500 KHz, 33% duty
   - ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ BIOS
   - ‚úÖ VGA vsync –∑–∞–ø—Ä–æ—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç
   - ‚úÖ Real-time –≤–∏–¥–µ–æ–≤—ã–≤–æ–¥ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç

2. üöÄ **–£–≤–µ–ª–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã (–≤ –ø—Ä–æ—Ü–µ—Å—Å–µ)**
   - ‚úÖ 5 Hz ‚Üí 100 Hz ‚Üí 5 KHz ‚Üí 500 KHz **–ó–ê–í–ï–†–®–ï–ù–û**
   - üîÑ 500 KHz ‚Üí 1 MHz ‚Üí 5 MHz (—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
   - –ó–∞–ø–∞—Å: 1.1-1.6x –ø—Ä–∏ 5 –ú–ì—Ü (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ)
   - –ú–∞–∫—Å–∏–º—É–º –±–µ–∑–æ–ø–∞—Å–Ω–æ: 6-7 MHz (—Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π)

3. üîß **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**
   - ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ BHE –¥–ª—è byte –æ–ø–µ—Ä–∞—Ü–∏–π **–ó–ê–í–ï–†–®–ï–ù–û**
   - ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ RAM –¥–æ 128KB **–ó–ê–í–ï–†–®–ï–ù–û**
   - ‚úÖ –í–∏–¥–µ–æ–ø–∞–º—è—Ç—å MDA —Å real-time –≤—ã–≤–æ–¥–æ–º **–ó–ê–í–ï–†–®–ï–ù–û**
   - ‚úÖ VGA port 0x3BA —ç–º—É–ª—è—Ü–∏—è **–ó–ê–í–ï–†–®–ï–ù–û**
   - [ ] I/O —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (UART, PIT hardware emulation)
   - [ ] –ü–æ–ª–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å 8259A (ICW1-ICW4, OCW1-OCW3, –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ IRQ)
   - [ ] –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–∏–¥–µ–æ—Ä–µ–∂–∏–º—ã (CGA/EGA)

### –°–±–æ—Ä–∫–∞

```bash
mkdir build
cd build
cmake ..
make
```

–†–µ–∑—É–ª—å—Ç–∞—Ç: `MultiIO.uf2`

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –ó–∞–≥—Ä—É–∑–∏—Ç—å `MultiIO.uf2` –Ω–∞ RP2040
2. –ü–æ–¥–∫–ª—é—á–∏—Ç—å –æ—Å—Ü–∏–ª–ª–æ–≥—Ä–∞—Ñ –∫ GPIO29 (CLK) - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 500 KHz, 33% duty
3. –ü–æ–¥–∫–ª—é—á–∏—Ç—å –æ—Å—Ü–∏–ª–ª–æ–≥—Ä–∞—Ñ –∫ GPIO28 (RESET) - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏–º–ø—É–ª—å—Å –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
4. –ü–æ–¥–∫–ª—é—á–∏—Ç—å –æ—Å—Ü–∏–ª–ª–æ–≥—Ä–∞—Ñ –∫ GPIO20 (ALE) - –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è —Ü–∏–∫–ª—ã —á—Ç–µ–Ω–∏—è –ø–æ—Å–ª–µ reset
5. –ü–æ–¥–∫–ª—é—á–∏—Ç—å —Ç–µ—Ä–º–∏–Ω–∞–ª –∫ USB - –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è –≤—ã–≤–æ–¥ BIOS –≤ real-time
6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å VGA vsync: –ø–æ—Ä—Ç 0x3BA –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å –±–∏—Ç—ã

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è @ 500 –ö–ì—Ü

‚úÖ **–£—Å–ø–µ—à–Ω–æ:**
- BIOS —Å—Ç–∞–±–∏–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
- –ü–æ–ª—É—á–µ–Ω—ã vsync –∑–∞–ø—Ä–æ—Å—ã –æ—Ç BIOS (–ø–æ—Ä—Ç 0x3BA —Ä–∞–±–æ—Ç–∞–µ—Ç)
- Real-time –≤—ã–≤–æ–¥ –≤–∏–¥–µ–æ–ø–∞–º—è—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
- –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏—è INTR/INTA –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

- –ù–µ—Ç :) - —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ

## –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

- ‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: –∞–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ i8086 minimal mode
- ‚úÖ PIO –ø—Ä–æ–≥—Ä–∞–º–º–∞: –ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è 16-–±–∏—Ç —à–∏–Ω—ã + INTA support
- ‚úÖ –≠–º—É–ª—è—Ü–∏—è –ø–∞–º—è—Ç–∏: ROM + RAM + Video RAM
- ‚úÖ –†–∞–∑–≥–æ–Ω: —Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –Ω–∞ 400 MHz
- ‚úÖ **100x —É—Å–∫–æ—Ä–µ–Ω–∏–µ**: 5 –ö–ì—Ü ‚Üí 500 –ö–ì—Ü
- ‚úÖ **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: Multicore FIFO –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ **Real-time –≤–∏–¥–µ–æ–≤—ã–≤–æ–¥**: ANSI escape sequences
- ‚úÖ **Compiler optimizations**: -Ofast, copy_to_ram
- ‚úÖ **BIOS upgrade**: Turbo XT BIOS v3.1
