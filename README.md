# RP8086 - –ß–∏–ø—Å–µ—Ç i8086 –Ω–∞ –±–∞–∑–µ RP2040

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

RP8086 - —ç—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ-–∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–π –∫–æ–º–ø–ª–µ–∫—Å, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π –∫–∏—Ç–∞–π—Å–∫—É—é —Ñ–∏–æ–ª–µ—Ç–æ–≤—É—é –ø–ª–∞—Ç—É RP2040 (Raspberry Pi Pico) –≤ –∫–∞—á–µ—Å—Ç–≤–µ —á–∏–ø—Å–µ—Ç–∞ –¥–ª—è –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ Intel 8086. RP2040 —ç–º—É–ª–∏—Ä—É–µ—Ç:

- ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å–∏—Å—Ç–µ–º–Ω–æ–π —à–∏–Ω—ã (PIO hardware)
- ‚úÖ –≠–º—É–ª—è—Ç–æ—Ä ROM (8KB Turbo XT BIOS v3.1)
- ‚úÖ –≠–º—É–ª—è—Ç–æ—Ä RAM (128KB)
- ‚úÖ –í–∏–¥–µ–æ–ø–∞–º—è—Ç—å MDA (4KB —Å real-time –≤—ã–≤–æ–¥–æ–º –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª)
- ‚úÖ I/O –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å —ç–º—É–ª—è—Ü–∏–µ–π VGA –ø–æ—Ä—Ç–æ–≤
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ç–∞–∫—Ç–æ–≤–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ (PWM, 500 KHz, 33% duty cycle)
- ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π 8259A (INTR/INTA protocol, multicore)
- ‚úÖ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏–π —à–∏–Ω—ã

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ**: RP2040 —Ç–æ–ª–µ—Ä–∞–Ω—Ç–Ω–∞ –∫ 5–í –Ω–∞ –≤—Ö–æ–¥–µ, –ø–æ—ç—Ç–æ–º—É –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ level shifters –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è –¥–ª—è –ø—Ä—è–º–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ i8086.

**–°—Ç–∞—Ç—É—Å**: –§–∞–∑–∞ 1+ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ - —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ 500 –ö–ì—Ü (100x —É—Å–∫–æ—Ä–µ–Ω–∏–µ), –≥–æ—Ç–æ–≤ –∫ —É–≤–µ–ª–∏—á–µ–Ω–∏—é –¥–æ 5 –ú–ì—Ü.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –î–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—É—é –¥–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É, –∫–æ—Ç–æ—Ä–∞—è —Ä–∞–∑–¥–µ–ª—è–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É —à–∏–Ω—ã –º–µ–∂–¥—É –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–º –∏ –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–º –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ–º:

**–£—Ä–æ–≤–µ–Ω—å 1: PIO (–ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å - i8086_bus.pio)**
- –†–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –Ω–∞ state machine PIO RP2040
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ —à–∏–Ω—ã –≤ –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–º –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–∏
- –£–ø—Ä–∞–≤–ª—è–µ—Ç —Å–∏–≥–Ω–∞–ª–∞–º–∏ —à–∏–Ω—ã i8086: ALE, RD, WR, M/IO, BHE, READY
- –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –¥–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é —à–∏–Ω—É –¥–∞–Ω–Ω—ã—Ö (GPIO 0-15)
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è (IRQ0 –¥–ª—è –∑–∞–ø–∏—Å–∏, IRQ1 –¥–ª—è —á—Ç–µ–Ω–∏—è, IRQ3 –¥–ª—è INTA)
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å sideset –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏ –∏ —Å–æ–∫—Ä–∞—â–µ–Ω–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
- –ú–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ —á–∞—Å—Ç–æ—Ç–µ –¥–æ 133 –ú–ì—Ü –¥–ª—è –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–∞–π–º–∏–Ω–≥–æ–≤

**–£—Ä–æ–≤–µ–Ω—å 2: ARM Cortex-M0+ (–ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å - cpu_bus.c)**
- –û–±—Å–ª—É–∂–∏–≤–∞–µ—Ç –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è –æ—Ç PIO —á–µ—Ä–µ–∑ FIFO
- –†–µ–∞–ª–∏–∑—É–µ—Ç —Ñ–∞–∫—Ç–∏—á–µ—Å–∫—É—é –ª–æ–≥–∏–∫—É —ç–º—É–ª—è—Ü–∏–∏ –ø–∞–º—è—Ç–∏/I/O
- –í—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –º–∞–∫—Ä–æ—Å `__time_critical_func` –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏–∑ RAM
- –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º `PICO_HIGHEST_IRQ_PRIORITY`

### –ú–Ω–æ–≥–æ—è–¥–µ—Ä–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–≤–æ–π–Ω–æ–µ —è–¥—Ä–æ RP2040 –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π:

**Core0 (–û—Å–Ω–æ–≤–Ω–æ–µ):**
- –†–∞–±–æ—Ç–∞–µ—Ç –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Ü–∏–∫–ª–µ —Å `__wfi()` (Wait For Interrupt)
- –û–±—Å–ª—É–∂–∏–≤–∞–µ—Ç –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è –æ—Ç PIO (—á—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å —à–∏–Ω—ã —á–µ—Ä–µ–∑ IRQ0/IRQ1)
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç USB —Å–µ—Ä–∏–π–Ω—É—é —Å–≤—è–∑—å
- –í—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã (—Å–±—Ä–æ—Å, –¥–∞–º–ø –ø–∞–º—è—Ç–∏ –∏ —Ç.–¥.)

**Core1 (–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä IRQ + –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä –ª–æ–≥–æ–≤):**
- –†–∞–±–æ—Ç–∞–µ—Ç –≤ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–º —Ü–∏–∫–ª–µ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `core1_irq_generator()`
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç IRQ0 –∫–∞–∂–¥—ã–µ ~5492ms (–∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è 500 –ö–ì—Ü CPU)
  - –ü—Ä–∏ 5 –ú–ì—Ü: ~54.925ms (18.2 Hz, —Å—Ç–∞–Ω–¥–∞—Ä—Ç IBM PC)
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç INTR=HIGH –ø—Ä–∏ –æ–∂–∏–¥–∞–Ω–∏–∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ª–æ–≥–æ–≤**: –ß–∏—Ç–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –∏–∑ FIFO –∏ –≤—ã–≤–æ–¥–∏—Ç –∏—Ö —á–µ—Ä–µ–∑ USB
- **Real-time –≤–∏–¥–µ–æ–≤—ã–≤–æ–¥**: –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∑–∞–ø–∏—Å—å –≤ –≤–∏–¥–µ–æ–ø–∞–º—è—Ç—å –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —á–µ—Ä–µ–∑ ANSI sequences
- **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**: –í—ã–≥—Ä—É–∂–∞–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π –ò –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–π I/O –∏–∑ Core0
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç multicore FIFO –¥–ª—è lockless –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏
- **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å IBM PC**: –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π —á–∞—Å—Ç–æ—Ç–µ 8253/8254 PIT (1.193182 MHz / 65536)

**–ü—Ä–æ—Ç–æ–∫–æ–ª INTA (State Machine PIO):**
- **INTA –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ PIO**: –í `i8086_bus.pio` –¥–æ–±–∞–≤–ª–µ–Ω `INTA_cycle`
- **–ü—Ä–æ—Ü–µ—Å—Å INTA**:
  1. PIO –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç INTA=LOW –ø–æ—Å–ª–µ ALE
  2. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç IRQ 3 –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç READY=1 (wait state)
  3. –ñ–¥–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ü–∏–∫–ª–∞ INTA (INTA=HIGH ‚Üí INTA=LOW)
  4. –ü–µ—Ä–µ–¥–∞–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ –æ–±—ã—á–Ω—ã–π —Ü–∏–∫–ª —á—Ç–µ–Ω–∏—è
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤ ARM**: `bus_read_handler()` –ø–æ–ª—É—á–∞–µ—Ç IRQ 3
  - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ñ–ª–∞–≥ `irq_pending1 = true`
  - –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º —á—Ç–µ–Ω–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤–µ–∫—Ç–æ—Ä –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è (0x08)
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç INTR=0

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ GPIO

| GPIO | –°–∏–≥–Ω–∞–ª | –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|--------|-------------|----------|
| 0-15 | AD0-AD15 | –î–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è | –ú—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —à–∏–Ω–∞ –∞–¥—Ä–µ—Å–∞/–¥–∞–Ω–Ω—ã—Ö (16 –±–∏—Ç) |
| 16-19 | A16-A19 | –í—Ö–æ–¥ | –°—Ç–∞—Ä—à–∏–µ –±–∏—Ç—ã –∞–¥—Ä–µ—Å–∞ (4 –±–∏—Ç–∞) |
| 20 | ALE | –í—Ö–æ–¥ | Address Latch Enable - –∑–∞—â–µ–ª–∫–∞ –∞–¥—Ä–µ—Å–∞ |
| 21 | RD | –í—Ö–æ–¥ | Read strobe - —Å–∏–≥–Ω–∞–ª —á—Ç–µ–Ω–∏—è (–∞–∫—Ç–∏–≤–Ω—ã–π LOW) |
| 22 | WR | –í—Ö–æ–¥ | Write strobe - —Å–∏–≥–Ω–∞–ª –∑–∞–ø–∏—Å–∏ (–∞–∫—Ç–∏–≤–Ω—ã–π LOW) |
| 23 | INTA | –í—Ö–æ–¥ | Interrupt acknowledge –æ—Ç i8086 (–∞–∫—Ç–∏–≤–Ω—ã–π LOW) |
| 24 | M/IO | –í—Ö–æ–¥ | Memory/IO select (1=–ø–∞–º—è—Ç—å, 0=I/O) |
| 25 | BHE | –í—Ö–æ–¥ | Bus High Enable (–ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ 8/16 –±–∏—Ç) |
| 26 | INTR | –í—ã—Ö–æ–¥ | Interrupt request –¥–ª—è i8086 (–∞–∫—Ç–∏–≤–Ω—ã–π HIGH) |
| 27 | READY | –í—ã—Ö–æ–¥ | Wait state control –¥–ª—è CPU (0=wait, 1=ready) |
| 28 | RESET | –í—ã—Ö–æ–¥ | Reset –¥–ª—è i8086 (–∞–∫—Ç–∏–≤–Ω—ã–π LOW) |
| 29 | CLK | –í—ã—Ö–æ–¥ | –¢–∞–∫—Ç–æ–≤—ã–π —Å–∏–≥–Ω–∞–ª –¥–ª—è i8086 (PWM, 500 –ö–ì—Ü) |


## –ü—Ä–æ—Ç–æ–∫–æ–ª —Ä–∞–±–æ—Ç—ã —à–∏–Ω—ã

### –¶–∏–∫–ª —á—Ç–µ–Ω–∏—è (RD)

1. **T1 —Ñ–∞–∑–∞ (wait_ALE)**: CPU –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç –∞–¥—Ä–µ—Å –Ω–∞ AD0-AD15 + A16-A19, –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç ALE=HIGH
   - PIO –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ `wait_ALE` –∏ –∂–¥–µ—Ç `wait 1 gpio ALE_PIN`

2. **T2 —Ñ–∞–∑–∞ (capture_address)**:
   - PIO –≤—ã–ø–æ–ª–Ω—è–µ—Ç `wait 0 gpio ALE_PIN side 1` - –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –∞–¥—Ä–µ—Å, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç READY=1 (wait state)
   - `in pins, 26` –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç 26 GPIO –ø–∏–Ω–æ–≤ (–∞–¥—Ä–µ—Å + —É–ø—Ä–∞–≤–ª—è—é—â–∏–µ —Å–∏–≥–Ω–∞–ª—ã)
   - `push` –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç 26 –±–∏—Ç –≤ FIFO –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ ARM
   - **ISR —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**: `[AD0-AD15][A16-A19][ALE][RD][WR][INTA][MIO][BHE]`

3. **T2-T3 —Ñ–∞–∑–∞ (wait_strobe)**:
   - PIO –æ–ø—Ä–∞—à–∏–≤–∞–µ—Ç —É–ø—Ä–∞–≤–ª—è—é—â–∏–µ —Å–∏–≥–Ω–∞–ª—ã —á–µ—Ä–µ–∑ `mov osr, pins`
   - `out null, 21` –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç GPIO 0-20, –æ—Å—Ç–∞–≤–ª—è—è RD/WR/INTA
   - –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç RD, WR, INTA —á–µ—Ä–µ–∑ `out x, 1` –∏ `jmp !x`

4. **T3 —Ñ–∞–∑–∞ (RD_cycle)**:
   - `irq 1` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ —á—Ç–µ–Ω–∏—è –¥–ª—è ARM
   - `mov osr, !null` + `out pindirs, 16` –ø–µ—Ä–µ–≤–æ–¥–∏—Ç AD0-AD15 –≤ —Ä–µ–∂–∏–º –≤—ã—Ö–æ–¥–∞
   - `pull block` –±–ª–æ–∫–∏—Ä—É—é—â–µ –∂–¥–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ—Ç ARM
   - `out pins, 16 side 1` –≤—ã–≤–æ–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ —à–∏–Ω—É, –æ–ø—É—Å–∫–∞–µ—Ç READY=0

5. **T4 —Ñ–∞–∑–∞ (cleanup)**:
   - `wait 1 gpio RD_PIN` –∂–¥–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ü–∏–∫–ª–∞ —á—Ç–µ–Ω–∏—è
   - `mov osr, null` + `out pindirs, 16` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç AD0-AD15 –≤ Z-—Å–æ—Å—Ç–æ—è–Ω–∏–µ
   - `jmp wait_ALE` –≤–æ–∑–≤—Ä–∞—Ç –≤ –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### –¶–∏–∫–ª –∑–∞–ø–∏—Å–∏ (WR)

1. **T1-T2 —Ñ–∞–∑—ã**: –ê–Ω–∞–ª–æ–≥–∏—á–Ω—ã —Ü–∏–∫–ª—É —á—Ç–µ–Ω–∏—è (–∑–∞—Ö–≤–∞—Ç –∞–¥—Ä–µ—Å–∞ –∏ —É–ø—Ä–∞–≤–ª—è—é—â–∏—Ö —Å–∏–≥–Ω–∞–ª–æ–≤)

2. **T3 —Ñ–∞–∑–∞ (WR_cycle)**:
   - `in pins, 16` –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç 16 –±–∏—Ç –¥–∞–Ω–Ω—ã—Ö —Å AD0-AD15
   - `push side 1` –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ FIFO, –æ–ø—É—Å–∫–∞–µ—Ç READY=0
   - `irq 0` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –¥–ª—è ARM —Å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π
   - `wait 1 gpio WR_PIN` –∂–¥–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ü–∏–∫–ª–∞ –∑–∞–ø–∏—Å–∏

3. **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ**:
   - PIO –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `wait_ALE` –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ü–∏–∫–ª–∞

### –¶–∏–∫–ª INTA (Interrupt Acknowledge)

1. **–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ INTA**: PIO –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç INTA=LOW –≤ —Ü–∏–∫–ª–µ `wait_strobe`

2. **INTA_cycle**:
   - `irq 3 side 1` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ –¥–ª—è ARM, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç READY=1 (wait state)
   - `wait 1 gpio INTA_PIN` –∂–¥–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è INTA (–ø–µ—Ä–µ—Ö–æ–¥ –≤ HIGH)
   - –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–∂–∏–¥–∞–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å ALE
   - `wait 0 gpio INTA_PIN` –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏–µ –≤–æ –≤—Ç–æ—Ä–æ–º —Ü–∏–∫–ª–µ INTA

3. **–ü–µ—Ä–µ—Ö–æ–¥ –≤ —á—Ç–µ–Ω–∏–µ**: –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è INTA —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –æ–±—ã—á–Ω—ã–π —Ü–∏–∫–ª —á—Ç–µ–Ω–∏—è
   - ARM –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `irq_pending1 = true`
   - –°–ª–µ–¥—É—é—â–∏–π —Ü–∏–∫–ª —á—Ç–µ–Ω–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤–µ–∫—Ç–æ—Ä –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è (0x08)

### –ü–∞—Ä—Å–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è —à–∏–Ω—ã (parse_bus_state)

–§—É–Ω–∫—Ü–∏—è `parse_bus_state()` –≤ cpu_bus.c –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ 26-–±–∏—Ç–Ω–æ–≥–æ —Å–ª–æ–≤–∞ PIO:

```c
info.address = bus_data & 0xFFFFF;       // Bits [19:0] - AD0-AD15 + A16-A19
info.ale     = (bus_data >> 20) & 1;     // Bit [20] - ALE
info.rd      = (bus_data >> 21) & 1;     // Bit [21] - RD
info.wr      = (bus_data >> 22) & 1;     // Bit [22] - WR
info.inta    = (bus_data >> 23) & 1;     // Bit [23] - INTA
info.m_io    = (bus_data >> 24) & 1;     // Bit [24] - M/IO
info.bhe     = (bus_data >> 25) & 1;     // Bit [25] - BHE
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è FIFO –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π

**IRQ0 (Write):**
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ `bus_write_handler()` —á–∏—Ç–∞–µ—Ç 2 –∑–∞–ø–∏—Å–∏ –∏–∑ FIFO:
  1. –ê–¥—Ä–µ—Å + —É–ø—Ä–∞–≤–ª—è—é—â–∏–µ —Å–∏–≥–Ω–∞–ª—ã
  2. 16-–±–∏—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å —à–∏–Ω—ã AD0-AD15
- –í—ã–∑—ã–≤–∞–µ—Ç `i8086_write(address, data, is_memory, bhe)`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—ã—Ä–æ–≤–Ω–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**IRQ1 (Read):**
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ `bus_read_handler()` —á–∏—Ç–∞–µ—Ç –∞–¥—Ä–µ—Å –∏–∑ FIFO
- –í—ã–∑—ã–≤–∞–µ—Ç `i8086_read(address, is_memory)` –∏–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤–µ–∫—Ç–æ—Ä –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç 16-–±–∏—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ–±—Ä–∞—Ç–Ω–æ –≤ PIO FIFO

**IRQ3 (INTA):**
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ñ–ª–∞–≥ `irq_pending1 = true`
- –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º —á—Ç–µ–Ω–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤–µ–∫—Ç–æ—Ä –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è 0x08
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç INTR=0

## –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –≠–º—É–ª—è—Ü–∏—è –ø–∞–º—è—Ç–∏

**RAM (128KB):**
- –î–∏–∞–ø–∞–∑–æ–Ω: 0x00000 - 0x1FFFF
- –ú–∞—Å—Å–∏–≤ `ram[RAM_SIZE]` —Å 4-byte alignment
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 8/16 –±–∏—Ç–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —á–µ—Ä–µ–∑ BHE –∏ A0
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**: –í—ã—Ä–æ–≤–Ω–µ–Ω–Ω—ã–π 16-–±–∏—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ `address & RAM_MASK_16BIT`
- **–£–º–µ–Ω—å—à–µ–Ω —Å 224KB**: –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∞ –ø–∞–º—è—Ç—å –¥–ª—è –±—É—Ñ–µ—Ä–æ–≤ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

**ROM (8KB Turbo XT BIOS v3.1):**
- –î–∏–∞–ø–∞–∑–æ–Ω: 0xFE000 - 0xFFFFF
- –ú–∞—Å—Å–∏–≤ `GLABIOS_0_4_1_8T_ROM` —Å 4-byte alignment (–æ–±–Ω–æ–≤–ª–µ–Ω –¥–æ Turbo XT BIOS)
- –¢–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ, 16-–±–∏—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø
- –í–µ–∫—Ç–æ—Ä —Å–±—Ä–æ—Å–∞ –ø–æ –∞–¥—Ä–µ—Å—É 0xFFFF0 —É–∫–∞–∑—ã–≤–∞–µ—Ç –≤ ROM
- –î–∞—Ç–∞ —Ä–µ–ª–∏–∑–∞ BIOS: 10/28/2017

**–í–∏–¥–µ–æ–ø–∞–º—è—Ç—å MDA (4KB):**
- –î–∏–∞–ø–∞–∑–æ–Ω: 0xB0000 - 0xB7FFF
- –ú–∞—Å—Å–∏–≤ `videoram[4096]` –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞ (80x25 —Å–∏–º–≤–æ–ª–æ–≤)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 8/16 –±–∏—Ç–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –∑–∞–ø–∏—Å–∏
- **Real-time –≤—ã–≤–æ–¥**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —á–µ—Ä–µ–∑ ANSI escape sequences
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –≤—ã–≤–æ–¥**: Core1 –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –≤–∏–¥–µ–æ–ø–∞–º—è—Ç–∏ –∏–∑ FIFO
- –†—É—á–Ω–æ–π –¥–∞–º–ø —á–µ—Ä–µ–∑ USB –∫–æ–º–∞–Ω–¥—É 'V' (–ø–µ—Ä–≤—ã–µ 5 —Å—Ç—Ä–æ–∫)

### –≠–º—É–ª–∏—Ä—É–µ–º—ã–µ I/O –ø–æ—Ä—Ç—ã

**–ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ –ø–æ—Ä—Ç—ã (—ç–º—É–ª—è—Ü–∏—è):**
| –ü–æ—Ä—Ç | –û–ø–∏—Å–∞–Ω–∏–µ | –í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ |
|------|----------|---------------------|
| 0x3BA | VGA Status Register | –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ vsync –±–∏—Ç–∞ (—ç–º—É–ª—è—Ü–∏—è) |

**–û–±—â–∏–µ –ø–æ—Ä—Ç—ã:**
- –ü–æ—Ä—Ç—ã 0x000-0xFFF –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è —ç–º—É–ª—è—Ü–∏–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 8/16 –±–∏—Ç–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –∑–∞–ø–∏—Å–∏ —á–µ—Ä–µ–∑ BHE
- –ß—Ç–µ–Ω–∏–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 0xFFFF –¥–ª—è –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –ø–æ—Ä—Ç–æ–≤
- **–ü–æ—Ä—Ç 0x3BA**: –≠–º—É–ª–∏—Ä—É–µ—Ç VGA status register —Å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º vsync –±–∏—Ç–∞ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å BIOS

### –û–±—Ä–∞–±–æ—Ç–∫–∞ BHE (Bus High Enable)

–§—É–Ω–∫—Ü–∏–∏ `i8086_read()` –∏ `i8086_write()` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –ø–æ–ª–Ω—É—é 8/16 –±–∏—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:

```c
// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–æ BHE –∏ A0
if (!bhe && !a0) {
    // 16-bit transfer: BHE=0, A0=0
    *(uint16_t *) &ram[address] = data;
} else if (bhe && !a0) {
    // Byte transfer –Ω–∞ —á–µ—Ç–Ω–æ–º –∞–¥—Ä–µ—Å–µ: BHE=1, A0=0 (–º–ª–∞–¥—à–∏–π –±–∞–π—Ç)
    ram[address] = data & 0xFF;
} else if (!bhe && a0) {
    // Byte transfer –Ω–∞ –Ω–µ—á–µ—Ç–Ω–æ–º –∞–¥—Ä–µ—Å–µ: BHE=0, A0=1 (—Å—Ç–∞—Ä—à–∏–π –±–∞–π—Ç)
    ram[address] = (data >> 8) & 0xFF;
}
// BHE=1, A0=1 - –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è, –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è
```

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π

**Core1 IRQ Generator:**
- –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç IRQ0 –∫–∞–∂–¥—ã–µ ~54.925ms (18.2 Hz)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `absolute_time_t` –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ —Ç–∞–π–º–∏–Ω–≥–∞
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `gpio_put(INTR_PIN, 1)` –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ `volatile bool irq_pending`

**INTA –ø—Ä–æ—Ç–æ–∫–æ–ª:**
- PIO –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç INTA=LOW —á–µ—Ä–µ–∑ `INTA_cycle`
- ARM —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `irq_pending1 = true` –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ IRQ3
- –°–ª–µ–¥—É—é—â–∏–π —Ü–∏–∫–ª —á—Ç–µ–Ω–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤–µ–∫—Ç–æ—Ä –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è 0x08
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±—Ä–æ—Å INTR=0 –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏

### USB –∫–æ–º–∞–Ω–¥—ã (main.c)

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å |
|---------|----------|-----------------|
| **'M'** | –î–∞–º–ø –ø–∞–º—è—Ç–∏ | –í—ã–≤–æ–¥–∏—Ç –ø–µ—Ä–≤—ã–µ 400 –±–∞–π—Ç RAM |
| **'V'** | –î–∞–º–ø –≤–∏–¥–µ–æ–ø–∞–º—è—Ç–∏ | –í—ã–≤–æ–¥–∏—Ç –ø–µ—Ä–≤—ã–µ 5 —Å—Ç—Ä–æ–∫ x 80 —Å–∏–º–≤–æ–ª–æ–≤ –∏–∑ –≤–∏–¥–µ–æ–ø–∞–º—è—Ç–∏ MDA |
| **'P'** | –î–∞–º–ø –ø–æ—Ä—Ç–æ–≤ | –í—ã–≤–æ–¥–∏—Ç –ø–µ—Ä–≤—ã–µ 400 –±–∞–π—Ç –º–∞—Å—Å–∏–≤–∞ –ø–æ—Ä—Ç–æ–≤ |
| **'R'** | –°–±—Ä–æ—Å CPU | –û—á–∏—â–∞–µ—Ç INTR, –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–±—Ä–æ—Å–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ |
| **'B'** | Bootloader | –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç RP2040 –≤ bootloader mode |

**Note**: –í–∏–¥–µ–æ–ø–∞–º—è—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≤ real-time —á–µ—Ä–µ–∑ Core1 (–Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∫–æ–º–∞–Ω–¥—ã 'V')

### –ö–∞—Ä—Ç–∞ –ø–∞–º—è—Ç–∏

```
0x00000 - 0x1FFFF : RAM (128KB)
0x20000 - 0xAFFFF : Unmapped (returns 0xFFFF)
0xB0000 - 0xB7FFF : Video RAM MDA (4KB)
0xB8000 - 0xFDFFF : Unmapped (returns 0xFFFF)
0xFE000 - 0xFFFFF : ROM Turbo XT BIOS v3.1 (8KB)
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
RP8086/
‚îú‚îÄ‚îÄ main.c              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞, Core1 IRQ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä + log processor, USB –∫–æ–º–∞–Ω–¥—ã
‚îú‚îÄ‚îÄ cpu.c/h             # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ i8086 (clock, reset, toggle_cpu)
‚îú‚îÄ‚îÄ cpu_bus.c/h         # –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —à–∏–Ω—ã, —ç–º—É–ª—è—Ü–∏—è –ø–∞–º—è—Ç–∏, INTA, async logging
‚îú‚îÄ‚îÄ i8086_bus.pio       # PIO –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ —à–∏–Ω—ã —Å INTA –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π
‚îú‚îÄ‚îÄ config.h            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è GPIO, —Å–∏—Å—Ç–µ–º—ã, —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ bios.h              # Turbo XT BIOS v3.1 ROM –æ–±—Ä–∞–∑ (8KB)
‚îú‚îÄ‚îÄ CMakeLists.txt      # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏ —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–º–∏
‚îú‚îÄ‚îÄ README.md           # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ CLAUDE.md           # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è Claude Code
‚îî‚îÄ‚îÄ STATUS.md           # –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
```

## –ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### cpu.c
- `start_cpu_clock()` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PWM clock –¥–ª—è i8086 (33% duty, 500 –ö–ì—Ü)
- `reset_cpu()` - RESET sequence (10 clocks LOW, 5 stabilization)
- `toggle_cpu()` - –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ —Ç–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è CPU

### cpu_bus.c
- `cpu_bus_init()` - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è PIO –∏ IRQ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- `bus_read_handler()` - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —á—Ç–µ–Ω–∏—è (IRQ1)
- `bus_write_handler()` - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–ø–∏—Å–∏ (IRQ0)
- `i8086_read()` - **–£–ª—å—Ç—Ä–∞-–±—ã—Å—Ç—Ä–æ–µ** —á—Ç–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ via aligned access + VGA port emulation
- `i8086_write()` - **–£–ª—å—Ç—Ä–∞-–±—ã—Å—Ç—Ä–∞—è** –∑–∞–ø–∏—Å—å –ø–∞–º—è—Ç–∏ via aligned access
- `log_event()` - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–ø–∏—Å—å —Å–æ–±—ã—Ç–∏—è –≤ –∫–æ–ª—å—Ü–µ–≤–æ–π –±—É—Ñ–µ—Ä + –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ FIFO

### –î–µ—Ç–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª—é—á–µ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

**cpu_bus.c - –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —à–∏–Ω—ã –∏ –ø–∞–º—è—Ç—å:**
- `cpu_bus_init()`: –ó–∞–≥—Ä—É–∂–∞–µ—Ç PIO –ø—Ä–æ–≥—Ä–∞–º–º—É, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç IRQ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
- `bus_read_handler()`: **–£–ª—å—Ç—Ä–∞-–±—ã—Å—Ç—Ä—ã–π** –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —á—Ç–µ–Ω–∏—è (IRQ1) —Å –≤—ã—Ä–æ–≤–Ω–µ–Ω–Ω—ã–º –¥–æ—Å—Ç—É–ø–æ–º
- `bus_write_handler()`: **–£–ª—å—Ç—Ä–∞-–±—ã—Å—Ç—Ä—ã–π** –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–ø–∏—Å–∏ (IRQ0) —Å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π FIFO –æ–±—Ä–∞–±–æ—Ç–∫–æ–π
- `parse_bus_state()`: –ò–∑–≤–ª–µ–∫–∞–µ—Ç 20-–±–∏—Ç–Ω—ã–π –∞–¥—Ä–µ—Å + —É–ø—Ä–∞–≤–ª—è—é—â–∏–µ —Å–∏–≥–Ω–∞–ª—ã –∏–∑ 26-–±–∏—Ç–Ω–æ–≥–æ —Å–ª–æ–≤–∞ PIO
- `i8086_read()`: 16-–±–∏—Ç–Ω–æ–µ —á—Ç–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏/I/O —Å BHE –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π + VGA port 0x3BA —ç–º—É–ª—è—Ü–∏—è
- `i8086_write()`: 16-–±–∏—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å –ø–∞–º—è—Ç–∏/I/O —Å –ø–æ–ª–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π 8/16 –±–∏—Ç–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- `log_event()`: –ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∞—è –∑–∞–ø–∏—Å—å —Å–æ–±—ã—Ç–∏–π –≤ –∫–æ–ª—å—Ü–µ–≤–æ–π –±—É—Ñ–µ—Ä + –æ—Ç–ø—Ä–∞–≤–∫–∞ –∏–Ω–¥–µ–∫—Å–∞ –≤ Core1 —á–µ—Ä–µ–∑ FIFO

**main.c - –ú–Ω–æ–≥–æ—è–¥–µ—Ä–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
- `core1_irq_generator()`: –î–≤–æ–π–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –Ω–∞ Core1:
  1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è IRQ0 –∫–∞–∂–¥—ã–µ ~5492ms (–∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è 500 –ö–ì—Ü)
  2. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ª–æ–≥–æ–≤ –∏–∑ FIFO
  3. Real-time –≤—ã–≤–æ–¥ –≤–∏–¥–µ–æ–ø–∞–º—è—Ç–∏ —á–µ—Ä–µ–∑ ANSI escape sequences
- `pic_init()`: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è INTR –ø–∏–Ω–∞, –æ—á–∏—Å—Ç–∫–∞ FIFO, –∑–∞–ø—É—Å–∫ Core1

**i8086_bus.pio - –í—ã—Å–æ–∫–æ–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π state machine:**

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã:**
- `.side_set 1 opt` - –æ–¥–∏–Ω sideset –±–∏—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è READY
- `.define` —Å–µ–∫—Ü–∏—è —Å –∂–µ—Å—Ç–∫–æ –∑–∞–¥–∞–Ω–Ω—ã–º–∏ GPIO pin assignments
- –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª: `wait_ALE` ‚Üí `capture_address` ‚Üí `wait_strobe` ‚Üí `operation_cycle`

**–ö–ª—é—á–µ–≤—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π polling**: –°–æ–∫—Ä–∞—â–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –≤ —Ü–∏–∫–ª–µ –æ–ø—Ä–æ—Å–∞ RD/WR/INTA
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ —Ç–∞–π–º–∏–Ω–≥–∏**: Sideset delays —Å–æ–≤–º–µ—â–µ–Ω—ã —Å IRQ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ (`irq 0 side 1`)
- **–ë—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö**: –ï–¥–∏–Ω—ã–π 16-–±–∏—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ `in pins, 16` / `out pins, 16`
- **–î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞**: –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤ –±–µ–∑ —É—Å–ª–æ–≤–Ω—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤

**–°–æ—Å—Ç–æ—è–Ω–∏—è PIO:**
1. `wait_ALE`: –û–∂–∏–¥–∞–Ω–∏–µ –Ω–∞—á–∞–ª–∞ —Ü–∏–∫–ª–∞ —à–∏–Ω—ã (ALE=HIGH)
2. `capture_address`: –ó–∞—Ö–≤–∞—Ç 26 –ø–∏–Ω–æ–≤ (–∞–¥—Ä–µ—Å + —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ) –ø—Ä–∏ ALE=LOW
3. `wait_strobe`: –û–ø—Ä–æ—Å —É–ø—Ä–∞–≤–ª—è—é—â–∏—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ (RD/WR/INTA)
4. `RD_cycle`: –¶–∏–∫–ª —á—Ç–µ–Ω–∏—è —Å –≤—ã–≤–æ–¥–æ–º –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —à–∏–Ω—É
5. `WR_cycle`: –¶–∏–∫–ª –∑–∞–ø–∏—Å–∏ —Å –∑–∞—Ö–≤–∞—Ç–æ–º –¥–∞–Ω–Ω—ã—Ö —Å —à–∏–Ω—ã
6. `INTA_cycle`: –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ state machine
7. `cleanup`: –í–æ–∑–≤—Ä–∞—Ç —à–∏–Ω—ã –¥–∞–Ω–Ω—ã—Ö –≤ Z-—Å–æ—Å—Ç–æ—è–Ω–∏–µ

**C –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è PIO:**
```c
void i8086_bus_program_init(PIO pio, uint sm, uint offset)
{
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ shift —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤
    sm_config_set_in_shift(&cfg, false, false, 32);   // IN: —Å–¥–≤–∏–≥ –≤–ª–µ–≤–æ
    sm_config_set_out_shift(&cfg, true, false, 32);   // OUT: —Å–¥–≤–∏–≥ –≤–ø—Ä–∞–≤–æ

    // –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø–∏–Ω–æ–≤
    sm_config_set_in_pins(&cfg, i8086_bus_AD_BUS_PINS);      // IN base = GPIO 0
    sm_config_set_out_pins(&cfg, i8086_bus_AD_BUS_PINS, 16); // OUT base = GPIO 0
    sm_config_set_sideset_pins(&cfg, i8086_bus_READY_PIN);   // SIDESET = GPIO 27
}
```

**–ü—Ä–µ—Ä—ã–≤–∞–Ω–∏—è –∏ –º–Ω–æ–≥–æ—è–¥–µ—Ä–Ω–æ—Å—Ç—å:**
- `pic_init()`: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç INTR –ø–∏–Ω (GPIO26), –æ—á–∏—â–∞–µ—Ç FIFO, –∑–∞–ø—É—Å–∫–∞–µ—Ç Core1
- `core1_irq_generator()`: –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Core1:
  - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç IRQ0 –∫–∞–∂–¥—ã–µ ~5492ms (500 –ö–ì—Ü) / ~54.925ms (5 –ú–ì—Ü)
  - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ª–æ–≥–∏ –∏–∑ FIFO –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
  - –í—ã–≤–æ–¥–∏—Ç –≤–∏–¥–µ–æ–ø–∞–º—è—Ç—å –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª –≤ real-time
- **INTA —á–µ—Ä–µ–∑ PIO**: –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ state machine (IRQ 3)
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç multicore FIFO –¥–ª—è lockless –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ù—É–ª–µ–≤—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –≤ IRQ handlers –±–ª–∞–≥–æ–¥–∞—Ä—è FIFO

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

**–ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å @ 500 –ö–ì—Ü:**
- **Zero-wait state –¥–æ—Å—Ç—É–ø**: PIO –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —à–∏–Ω—É –±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫
- **Hardware timing**: –í—Å–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ PIO
- **–ö—Ä–∏—Ç–∏—á–Ω—ã–π –∫–æ–¥**: –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–æ–º–µ—á–µ–Ω—ã `__time_critical_func` –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –≤ RAM
- **–í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏—è —à–∏–Ω—ã –∏–º–µ—é—Ç `PICO_HIGHEST_IRQ_PRIORITY`
- **–ó–∞–ø–∞—Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**: 42x –ø—Ä–∏ 500 –ö–ì—Ü (3200 —Ç–∞–∫—Ç–æ–≤ RP2040 / ~75 —Ç—Ä–µ–±—É–µ—Ç—Å—è)
- **CPU –Ω–∞–≥—Ä—É–∑–∫–∞**: ~2.5% worst case –ø—Ä–∏ 500 –ö–ì—Ü

**–ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (—É–ª—É—á—à–µ–Ω–∏–µ –Ω–∞ 40-60% + 100x —É—Å–∫–æ—Ä–µ–Ω–∏–µ):**
- ‚úÖ **100x —É—Å–∫–æ—Ä–µ–Ω–∏–µ**: 5 –ö–ì—Ü ‚Üí 500 –ö–ì—Ü (–≥–æ—Ç–æ–≤ –∫ 5 –ú–ì—Ü)
- ‚úÖ **–í—ã—Ä–æ–≤–Ω–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –ø–∞–º—è—Ç–∏**: Single 16-bit access —á–µ—Ä–µ–∑ `address & ~1U`
- ‚úÖ **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–∞—Å—Å–∏–≤—ã**: 4-byte alignment –¥–ª—è RAM –∏ ROM
- ‚úÖ **–£—Å–∫–æ—Ä–µ–Ω–Ω—ã–π PIO**: –£–¥–∞–ª–µ–Ω—ã —É—Å–ª–æ–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã, —Å–æ–∫—Ä–∞—â–µ–Ω —Ü–∏–∫–ª –æ–ø—Ä–æ—Å–∞
- ‚úÖ **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ —Ç–∞–π–º–∏–Ω–≥–∏**: Sideset delays —Å–æ–≤–º–µ—â–µ–Ω—ã —Å IRQ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏
- ‚úÖ **–ö–æ–º–ø–∏–ª—è—Ç–æ—Ä**: -Ofast, -ffunction-sections, -fdata-sections
- ‚úÖ **RAM execution**: copy_to_ram binary mode –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏
- ‚úÖ **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π I/O**: –ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–µ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ multicore FIFO
- ‚úÖ **CPU –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ 5 –ú–ì—Ü**: ~25% worst case (4.2x –∑–∞–ø–∞—Å)

### PIO State Machine

- –†–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç ARM —è–¥—Ä–∞
- –ß–∞—Å—Ç–æ—Ç–∞: –¥–æ 133 –ú–ì—Ü (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–∞–∑–≥–æ–Ω–∞ RP2040)
- –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π timing –¥–ª—è —Å–∏–≥–Ω–∞–ª–æ–≤ —à–∏–Ω—ã
- FIFO –¥–ª—è –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏ —Å ARM
- **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π polling**: –°–æ–∫—Ä–∞—â–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö**: –ï–¥–∏–Ω—ã–π 16-–±–∏—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø

## –°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –§–∞–∑–∞ 1+ ‚úÖ –ó–ê–í–ï–†–®–ï–ù–ê –° –£–õ–£–ß–®–ï–ù–ò–Ø–ú–ò
- ‚úÖ –ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —ç–º—É–ª—è—Ç–æ—Ä Intel 8086 @ 500 –ö–ì—Ü
- ‚úÖ 128KB RAM + 8KB ROM (Turbo XT BIOS v3.1) + 4KB –≤–∏–¥–µ–æ–ø–∞–º—è—Ç—å MDA
- ‚úÖ –í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —à–∏–Ω—ã –Ω–∞ PIO
- ‚úÖ PWM –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ç–∞–∫—Ç–æ–≤ (500 –ö–ì—Ü, –≥–æ—Ç–æ–≤ –∫ 5 –ú–ì—Ü)
- ‚úÖ –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ 8/16 –±–∏—Ç–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (BHE handling)
- ‚úÖ **INTA —á–µ—Ä–µ–∑ PIO**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π –≤ state machine (IRQ 3)
- ‚úÖ **INTR –Ω–∞ Core1**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π (GPIO26, 18.2 Hz –ø—Ä–∏ 5 –ú–ì—Ü)
- ‚úÖ **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è**: Multicore FIFO, –∫–æ–ª—å—Ü–µ–≤–æ–π –±—É—Ñ–µ—Ä
- ‚úÖ **Real-time –≤–∏–¥–µ–æ–≤—ã–≤–æ–¥**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —á–µ—Ä–µ–∑ ANSI
- ‚úÖ **VGA –ø–æ—Ä—Ç 0x3BA**: –≠–º—É–ª—è—Ü–∏—è vsync –±–∏—Ç–æ–≤ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å BIOS

### –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ üöÄ
- **100x —É—Å–∫–æ—Ä–µ–Ω–∏–µ**: 5 –ö–ì—Ü ‚Üí 500 –ö–ì—Ü (—Å—Ç–∞–±–∏–ª—å–Ω–æ)
- **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ 5 –ú–ì—Ü**: 42x –∑–∞–ø–∞—Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π I/O**: –ù—É–ª–µ–≤—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –≤ IRQ handlers
- **Compiler optimizations**: -Ofast, copy_to_ram, size optimizations
- **40-60% —É—Å–∫–æ—Ä–µ–Ω–∏–µ** –æ–ø–µ—Ä–∞—Ü–∏–π —Å –ø–∞–º—è—Ç—å—é (address alignment)
- **–°–Ω–∏–∂–µ–Ω–∏–µ CPU –Ω–∞–≥—Ä—É–∑–∫–∏**: ~2.5% –ø—Ä–∏ 500 –ö–ì—Ü, ~25% –ø—Ä–∏ 5 –ú–ì—Ü
- **–ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π** —á–µ—Ä–µ–∑ PIO –≤–º–µ—Å—Ç–æ GPIO
- **BIOS –æ–±–Ω–æ–≤–ª–µ–Ω**: GlaBIOS ‚Üí Turbo XT BIOS v3.1

### TODO (–§–∞–∑–∞ 2)

- [x] –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π INTR/INTA ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
- [x] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ BHE –¥–ª—è 8/16 –±–∏—Ç–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
- [x] –í–∏–¥–µ–æ–ø–∞–º—è—Ç—å MDA ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
- [x] –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
- [x] Real-time –≤–∏–¥–µ–æ–≤—ã–≤–æ–¥ ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
- [x] 100x —É—Å–∫–æ—Ä–µ–Ω–∏–µ (5 –ö–ì—Ü ‚Üí 500 –ö–ì—Ü) ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
- [ ] –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –¥–æ —Ä–∞–±–æ—á–∏—Ö 5 –ú–ì—Ü (–≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
- [ ] –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ I/O —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (UART, PIT hardware emulation)
- [ ] –ü–æ–ª–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å 8259A (ICW1-ICW4, OCW1-OCW3, –º–∞—Å–∫–∏ IRQ)
- [ ] –í–Ω–µ—à–Ω–∏–µ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è –∏ DMA
- [ ] –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–∏–¥–µ–æ—Ä–µ–∂–∏–º—ã (CGA/EGA —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)

## –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

```bash
mkdir cmake-build-release
cd cmake-build-release
cmake --build .
```

–†–µ–∑—É–ª—å—Ç–∞—Ç: `cmake-build-release/bin/rp2040/Release/MultiIO.uf2` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ RP2040

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Pico SDK
- CMake >= 3.13
- GCC ARM toolchain
- –ö–∏—Ç–∞–π—Å–∫–∞—è —Ñ–∏–æ–ª–µ—Ç–æ–≤–∞—è –ø–ª–∞—Ç–∞ RP2040 (–≤—Å–µ 30 GPIO –¥–æ—Å—Ç—É–ø–Ω—ã)


## –õ–∏—Ü–µ–Ω–∑–∏—è

–ù–µ —É–∫–∞–∑–∞–Ω–∞
